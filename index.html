<!DOCTYPE html>

<head>
	<title>JS Loading Bar</title>
	<meta charset="utf8">
	<link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>

    <section class="target-bar-container">
        <div class="target-wrap progress" data-progress-percent="">
        <div class="target-bar progress">
        </div>
        </div>
    </section>

    <span class='targetbar'></span>
    <button class='increase-donation'>^</button>
    <button class='decrease-donation'>!</button>

    Donate: <input type='text' name='donation-amount'>
            <input type="submit" value="Submit">
				

	<script src='src/TargetBar.js'></script>
	<script src='https://code.jquery.com/jquery-2.0.3.min.js'></script>
    <script>
        moveProgressBar();
        $(window).resize(function() {
            moveProgressBar();
        });

        function moveProgressBar() {
            var targetbar = new TargetBar(200, 500);
            var currentPercentage = targetbar.percentage()
            var status = targetbar.progress()
                console.log(status)
          // Whatever is in progress-wrap, divide it by 100
            var getPercent = (currentPercentage) / 100;
            var getTargetWrapHeight = $('.target-wrap').height();
            var progressTotal = getPercent * getTargetWrapHeight;
            var animationLength = 2500;
            
            $('.increase-donation').on('click', function() {
                targetbar.addMoney(10);
                    console.log(targetbar)
                $('.target-bar').animate({
                    bottom: '+=2%'
                }, 300);
            });
            
            $('.decrease-donation').on('click', function() {
                targetbar.subtractMoney(10);
                    console.log(targetbar)
                $('.target-bar').animate({
                    bottom: '-=2%'
                }, 300);
            });
            // on page load, animate percentage bar to data percentage length
            // .stop() used to prevent animation queueing
            $('.target-bar').stop().animate({
                bottom: progressTotal
            }, animationLength);
        }

    </script>


</body>